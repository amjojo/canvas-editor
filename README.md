
# canvas-editor
一个小型文本编辑器
1. 可复用
2. 仅支持文本格式：设置字体、字号、颜色、背景色、删除线、下划线、行高
2. 支持 输入、删除、回车、选中操作
3. 支持超出滚动

# 实现方案：
1. 数据为json格式，遍历数据列表，计算出每项数据的字符高宽
2. 根据容器高宽，计算出每一行包括的数据项，同时计算出每一行的高宽，高度即为这一行中最高的数据项高度
3. 逐行进行绘制，同时根据页面高度判断，如果超出当前容器高度，支持滚动条
#### 计算行数据
canvas提供了一个measureText方法来获取文本的属性，但只能获取到width，没有height。
获取文本的高度的话是通过actualBoundingBoxAscent和actualBoundingBoxDescent两个属性来获取，表示从actualBoundingBoxDescent属性表明的水平线到渲染文本的矩形边界顶部、底部的距离。
font中设置的行高在canvas中会强行修改成normal，所以在设置行高的时候，需要通过代码将文本实际的高度乘以1.5行高。
#### 渲染行数据
这里需要注意的是需要用一个变量renderHeight来记录绘制的高度， 如果超出，增加滚动条
#### 渲染光标
需要计算出光标的位置和光标的高度
1. 监听canvas的mousedown事件，计算出光标的问题
2. 遍历行数据，判断鼠标点击在哪个行元素内，最后计算出光标坐标及高度
3. 定位并渲染光标
4. 光标的闪烁效果是通过定时器实现的
#### 选中
1. 通过一个数组来记录选取的开始元素位置和结束元素位置
2. 选中是在鼠标按下的时候进行的，添加一个标识符代表鼠标当前是否处于按下状态，然后监听鼠标移动事件和松开事件，该事件绑定到当前编辑器容器上
3. 处理和光标的冲突：在选择选取的时候可以判断一下当前选取范围是否大于0，是的话就隐藏光标；每次在设置光标时，清除掉之前的选中区域；
